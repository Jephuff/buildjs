const path = require('path');

const normalizeName = (p, prefix) => {
  const parts = p.split('/');

  return parts.length > 1
    ? `${parts[0]}/${[prefix, parts[1]].join('-')}`
    : [prefix, parts[0]].join('-');
};

const babel = (content, filename, deps, rootDir) => {
  if (
    path.basename(rootDir).includes('eslint-config')
    && path.extname(filename) === '.js'
  ) {
    const config = require(path.resolve(filename)) || {}; // eslint-disable-line global-require

    const configs = config.extends.map(p => normalizeName(p, 'eslint-config'));
    const plugins = config.plugins.map(p => normalizeName(p, 'eslint-plugin'));

    return configs.concat(plugins);
  }

  return [];
};

module.exports = babel;
